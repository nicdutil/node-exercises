var carousels={};var buttonSelected={};var CAROUSEL_WAIT=minToMillis(100);var CAROUSEL_TIMEOUT=secToMillis(300000);function secToMillis(s){return s*1000}function minToMillis(m){return m*secToMillis(60)}var Carousel=function Carousel(){this.active=true;this.currIndex=0;this.prevIndex=-1;this.items;this.timeout;this.timerId;this.id};Carousel.prototype.pause=function(){var that=this;this.stop();this.timerId=setTimeout(function(){that.start()},CAROUSEL_WAIT)};Carousel.prototype.stop=function(){this.active=false;var id=this.id;if(typeof buttonSelected[id]!=="undefined"){$(buttonSelected[this.id]).removeClass("selected-button")}clearTimeout(this.timerId)};Carousel.prototype.start=function(){var id=this.id;var currIndex=0;this.active=true;$.each(this.items,function(key,value){if(value===buttonSelected[id]){currIndex=key+1;return false}});this.prevIndex=currIndex-1;if(currIndex==this.items.length){currIndex=0}this.currIndex=currIndex;if(typeof buttonSelected[id]!=="undefined"){$(buttonSelected[id]).removeClass("selected-button")}nextItem(this.id)};function initCarousel(id,timeout){var c=new Carousel();timeout=typeof timeout!=="undefined"?timeout:CAROUSEL_TIMEOUT;c.timeout=timeout;c.items=$("#"+id+" button");c.id=id;carousels[id]=c;c.start()}function nextItem(id){var c=carousels[id];var currButton;if(c.prevIndex>-1){currButton=c.items.eq(c.prevIndex);$(currButton).removeClass("selected-button")}currButton=c.items.eq(c.currIndex);$(currButton).addClass("selected-button");buttonSelected[id]=currButton;showPanel(id,currButton.prop("id"));c.prevIndex=c.currIndex;c.currIndex++;if(c.currIndex==c.items.length){c.currIndex=0}c.timerId=setTimeout(function(){nextItem(id)},c.timeout)};