/*! Copyright 2014 Infocinc (www.infocinc.com)
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
*/
;function namespace(namespaceString){var parts=namespaceString.split("."),parent=window,currentPart="";for(var i=0,length=parts.length;i<length;i++){currentPart=parts[i];parent[currentPart]=parent[currentPart]||{};parent=parent[currentPart]}return parent}var cm=namespace("ifc.common");cm.navMiniMode=false;cm.screenType;cm.screenTypeEnum={MOBILE:0,TABLET_PORTRAIT:1,TABLET_LANDSCAPE:2,DESKTOP_LG:3,DESKTOP_WIDE:4};function queryMediaState(){var size=parseInt($("#media-state").css("font-size"),10);var screenType;if(size===1){screenType=cm.screenTypeEnum.MOBILE}else{if(size===2){screenType=cm.screenTypeEnum.TABLET_PORTRAIT}else{if(size===3){screenType=cm.screenTypeEnum.TABLET_LANDSCAPE}else{if(size===4){screenType=cm.screenTypeEnum.DESKTOP_LG}else{screenType=cm.screenTypeEnum.DESKTOP_WIDE}}}}return screenType}$.fn.isOnScreen=function(){var win=$(window);var viewport={top:win.scrollTop(),left:win.scrollLeft()};viewport.right=viewport.left+win.width();viewport.bottom=viewport.top+win.height();var bounds=this.offset();bounds.right=bounds.left+this.outerWidth();bounds.bottom=bounds.top+this.outerHeight();return(!(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top||viewport.top>bounds.bottom))};var graph,refreshIntervalId,graphCanvasId;function setBarGraphCtx(canvasId){var w,h;var canvas=document.getElementById(canvasId);var site_state=queryMediaState();graphCanvasId=canvasId;if(typeof G_vmlCanvasManager!="undefined"){canvas=G_vmlCanvasManager.initElement(canvas)}var selector="#"+canvasId;if(canvasId==="screen-canvas"){if(site_state==="TABLET-PORTRAIT"){w=$("#screen-services-visual").width()}else{w=0.3*$("#screen-services").width()}h=CANVAS_RATIO*$("#screen-services").height()}else{w=0.8*$("#services").width();h=200}$(selector).attr({width:w,height:h});barGraphCtx=canvas.getContext("2d")}function createBarGraph(){var lastOrientation="horizontal";if(typeof graph!=="undefined"&&graphCanvasId!=="excel-canvas"){lastOrientation=graph.orientation}graph=new BarGraph(barGraphCtx);graph.margin=5;graph.orientation=lastOrientation;graph.width=barGraphCtx.canvas.width;graph.height=barGraphCtx.canvas.height;graph.xAxisLabelArr=["A","B","C","D","E","F","G"];graph.update([Math.random()*10,Math.random()*10,Math.random()*10,Math.random()*10,Math.random()*10,Math.random()*10,Math.random()*10]);refreshIntervalId=setInterval(function(){graph.update([Math.random()*10,Math.random()*10,Math.random()*10,Math.random()*10,Math.random()*10,Math.random()*10,Math.random()*10])},4000)}function BarGraph(ctx){var that=this;var startArr;var endArr;var looping=false;var barMax=0;var loop=function(){var delta;var animationComplete=true;var paintFlag;looping=true;if($("#excel-photo").css("display")==="none"){paintFlag=$("#screen-services").isOnScreen()}else{paintFlag=$("#excel-photo").isOnScreen()}if(!paintFlag){setTimeout(loop,that.animationInterval/that.animationSteps);return}for(var i=0;i<endArr.length;i+=1){delta=(endArr[i]-startArr[i])/that.animationSteps;that.curArr[i]+=delta;if(delta>0.01){animationComplete=false}}if(animationComplete){looping=false}else{draw(that.curArr);this.timerId=setTimeout(loop,that.animationInterval/that.animationSteps)}};var draw=function(arr){var numOfBars=arr.length,barWidth,barHeight,border=2,ratio,maxBarHeight,largestValue,graphAreaX=0,graphAreaY=0,graphAreaWidth=that.width,graphAreaHeight=that.height,i;ctx.fillStyle=that.backgroundColor;ctx.fillRect(0,0,that.width,that.height);if(that.xAxisLabelArr.length){graphAreaHeight-=40}if(that.orientation==="horizontal"){barWidth=graphAreaWidth/numOfBars-that.margin*2;maxBarHeight=graphAreaHeight-25}else{barWidth=graphAreaHeight/numOfBars-that.margin*2;maxBarHeight=graphAreaWidth-40}var largestValue=barMax=Math.max.apply(Math,arr);for(i=0;i<arr.length;i+=1){if(that.maxValue){ratio=arr[i]/that.maxValue}else{ratio=arr[i]/largestValue}barHeight=ratio*maxBarHeight;if(barHeight>border*2){ctx.fillStyle=that.colors[i%that.colors.length];if(that.orientation==="horizontal"){ctx.fillRect(that.margin+i*that.width/numOfBars+border,graphAreaHeight-barHeight+border,barWidth-border*2,barHeight-border*2)}else{ctx.fillRect(15,that.margin+i*that.height/numOfBars,barHeight,barWidth)}}ctx.fillStyle="#333";ctx.font="bold 12px sans-serif";ctx.textAlign="center";try{if(that.orientation==="horizontal"){ctx.fillText(parseInt(arr[i],10),i*that.width/numOfBars+(that.width/numOfBars)/2,graphAreaHeight-barHeight-10)}else{ctx.fillText(parseInt(arr[i],10),barHeight+25,i*that.height/numOfBars+(that.height/numOfBars)/2,graphAreaWidth-barHeight-10)}}catch(ex){}if(that.xAxisLabelArr[i]){ctx.fillStyle="#333";ctx.font="bold 12px sans-serif";ctx.textAlign="center";try{if(that.orientation==="horizontal"){ctx.fillText(that.xAxisLabelArr[i],i*that.width/numOfBars+(that.width/numOfBars)/2,that.height-10)}else{ctx.fillText(that.xAxisLabelArr[i],5,i*that.height/numOfBars+(that.height/numOfBars)/2,that.width-10)}}catch(ex){}}}};this.width;this.height;this.timerId;this.maxValue;this.margin=5;this.colors=["#354774","#C0392B","#27AE60","#E5C454"];this.curArr=[];this.backgroundColor="#fff";this.xAxisLabelArr=[];this.yAxisLabelArr=[];this.animationInterval=400;this.animationSteps=20;this.orientation;this.interrupt="false";this.update=function(newArr){if(that.curArr.length!==newArr.length){that.curArr=newArr;draw(newArr)}else{if(!looping){startArr=that.curArr;endArr=newArr;loop()}}}}var rollodex_curr=1;var rollodex_length;function initSlider(){rollodex_length=$(".slider .slide").length;setTimeout(nextSlide,5000)}function getSlideSelector(n){var selector=".slider  .slide:nth-child("+n+")";return selector}function hideSlide(n){var selector=getSlideSelector(n);if((n+1)>rollodex_length){rollodex_curr=n=0}$(selector).animate({opacity:"0"},1000,function(){$(selector).addClass("hide")});showSlide(n+1)}function showSlide(n){var selector=getSlideSelector(n);$(selector).css("opacity","0");$(selector).removeClass("hide");$(selector).animate({opacity:"1"},1000)}function nextSlide(){hideSlide(rollodex_curr);rollodex_curr=rollodex_curr+1;setTimeout(nextSlide,5000)}function navBarResizeHandler(direction){var src;var fixedFlag="fixed"===$("#fixed-bar").css("position");if(!fixedFlag){return}if(direction==="down"){$("#fixed-bar").addClass("navbar-mini");navMiniMode=true}else{$("#fixed-bar").removeClass("navbar-mini");navMiniMode=false}}var hero_anchors=["#top-hero-anchor","#services-hero-anchor","#method-hero-anchor","#project-hero-anchor","#team-hero-anchor"];var footer_anchors=["#hero-footer-anchor","#services-footer-anchor","#team-footer-anchor","#method-footer-anchor","#top-footer-anchor","#project-footer-anchor","#contact-hero-anchor"];var main_nav_anchors=["#service-nav-anchor","#method-nav-anchor","#team-nav-anchor","#footer-nav-anchor"];function registerScrollsTo(){var media_state=queryMediaState();$(main_nav_anchors.join()).scrollTo({speed:800,offset:0,easing:"easeInOutCubic"});$(hero_anchors.join()).scrollTo({speed:1500,offset:0,easing:"easeInOutCubic"});if(media_state!=="MOBILE"){$(footer_anchors.join()).scrollTo({speed:1500,offset:0,easing:"easeInOutCubic"})}}function createGaEvent(label,value,url){e={hitType:"event",eventCategory:"button",eventAction:"click",eventLabel:label,eventValue:value,page:url,nonInteraction:false};return e}function registerNavClicks(){var path=document.location.pathname;$(".center-navigation").on("click",function(){eo=createGaEvent("nav-button",1,path);ga("send",eo)});$("#navbar-collapse a").on("click",function(e){var navitem=$(e.target).text().toLowerCase()+"-menuitem";eo=createGaEvent(navitem,1,path);ga("send",eo)})};